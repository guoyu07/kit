function exist_p() {
    local _p=$1
    which ${_p} >/dev/null 2>&1; echo $?
}

p_java=$(exist_p 'java')
if [[ 0 -eq p_java ]]; then
    export JAVA_HOME=$(readlink -f `which java` | sed 's:/bin/java::')
fi
